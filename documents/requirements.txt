# 映画館窓口業務エージェント - 要件定義書

## 1. 概要
映画館の窓口業務を行うエージェントを実現するため、MCPツール群を実装する。
業務内容は以下の流れで構成される：
- 映画・上映時間の確定
- 空席情報の提示と座席選択
- 予約確定

## 2. 機能要件

### 2.1 映画情報管理機能
**機能名**: get_movie_list
**説明**: 現在上映中の映画一覧を取得する
**要件**:
- 映画名、上映時間、ジャンル、評価、概要等の基本情報を管理
- 日付指定による絞り込み機能
- 映画の推薦機能（評価・ジャンル・人気度に基づく）

### 2.2 上映スケジュール管理機能
**機能名**: get_show_schedule
**説明**: 指定した映画の上映スケジュールを取得する
**要件**:
- 映画名および日付を指定して上映時間一覧を取得
- 各上映時間枠の上映館ID、空席有無も併せて取得

### 2.3 座席管理機能
**機能名**: get_seat_availability
**説明**: 指定した上映回の座席空き状況を取得する
**要件**:
- 映画名、日付、上映時間を指定して当該上映館IDの座席状況を取得
- 空いている座席の一覧返却

### 2.4 座席予約機能
**機能名**: reserve_seats
**説明**: 指定した座席の予約を実行する
**要件**:
- 映画名、日付、上映時間、座席番号を指定して予約確定
- 複数座席の同時予約対応
- 予約確定後、予約IDを返却

### 2.5 予約確認機能
**機能名**: get_reservation_details
**説明**: 確定した予約の詳細情報を取得する
**要件**:
- 予約ID、映画名、日時、座席番号等の予約詳細表示
- 予約IDによる検索機能

## 3. データ構造要件

### 3.1 映画データ
- movie_id: 映画ID（ユニーク）
- title: 映画名
- genre: ジャンル
- duration: 上映時間（分）
- rating: 評価（1-5）
- description: 概要
- release_date: 公開日

### 3.2 上映スケジュールデータ
- schedule_id: スケジュールID（ユニーク）
- movie_id: 映画ID
- date: 上映日
- start_time: 開始時間
- end_time: 終了時間
- theater_id: 上映館ID

### 3.3 上映回座席状況データ
- schedule_id: スケジュールID（上映スケジュールデータと関連）
- available_seats: 空席リスト
  - seat_id: 座席ID（"A1", "A2", "B1"等の形式）
  - row: 行（A, B, C...）
  - number: 座席番号（1, 2, 3...）
  - seat_type: 座席種別（一般、カップル、車椅子対応等）
- occupied_seats: 予約済み座席リスト（available_seatsと同じ構造）

### 3.4 予約データ
- reservation_id: 予約ID（ユニーク）
- schedule_id: スケジュールID
- seat_ids: 予約座席IDリスト
- reservation_time: 予約確定時刻
- status: 予約状況（確定、キャンセル等）

## 4. 非機能要件

### 4.1 パフォーマンス要件
- 各API呼び出しは3秒以内にレスポンスを返す
- 同時予約処理におけるデータ整合性の保証

### 4.2 可用性要件
- 99%以上の稼働率を維持
- エラー時の適切なエラーメッセージ表示

### 4.3 データ要件
- 最低でも10作品以上の映画データを保持
- 各映画につき1日3回以上の上映スケジュール
- 各上映館は最低50席以上の座席を保持

### 4.4 セキュリティ要件
- 予約データの改ざん防止
- 同時予約による競合状態の適切な処理

## 5. 実装方針

### 5.1 データ保存
- JSON形式でのマスターデータ管理
- メモリ上での高速検索処理
- 予約状況の永続化

### 5.2 エラーハンドリング
- 映画名の曖昧検索における候補提示
- 満席時の代替案提示
- システムエラー時の適切なメッセージ表示

### 5.3 ユーザビリティ
- 直感的な座席選択インターフェース
- 分かりやすい予約確認メッセージ
- 推薦機能による利用者体験向上
